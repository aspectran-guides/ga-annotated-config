<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE aspectran PUBLIC "-//ASPECTRAN//DTD Aspectran Configuration 4.0//EN"
        "http://aspectran.github.io/dtd/aspectran-4.dtd">

<aspectran>

    <description>
        AOP 및 특수한 목적의 Bean 정의에 한하여 XML 문서에 구성을 설정하고,
        그 외 대부분의 설정을 Java 코드 상의 Annotation을 이용하여 구성할 수 있습니다.
    </description>

    <settings>
        <setting name="transletNamePattern" value="/ga-annotated-config/*"/>
    </settings>

    <bean scan="sample.*"/>

    <bean id="jspViewDispatcher" class="com.aspectran.web.support.view.JspViewDispatcher">
        <properties>
            <item name="prefix" value="/WEB-INF/jsp/"/>
            <item name="suffix" value=".jsp"/>
        </properties>
    </bean>

    <aspect id="transletSettings">
        <joinpoint type="translet"/>
        <settings>
            <setting name="characterEncoding" value="utf-8"/>
            <setting name="viewDispatcher" value="jspViewDispatcher"/>
        </settings>
    </aspect>

    <aspect id="sampleAspect">
        <description>
            본 Aspect는 다음과 같은 역할을 합니다.
            요청 URI가 "/ga-annotated-config/"로 시작하고 "helloWorld"로 끝나는 요청에 대하여,
            simplestAction Bean의 helloWorld 메쏘드를 실행하는 Translet이 발견되면,
            해당 Translet의 실행 전에는 sampleAdvice Bean의 welcome 메쏘드를 실행하고,
            해당 Translet의 실행 후에는 sampleAdvice Bean의 goodbye 메쏘드를 실행합니다.
        </description>
        <joinpoint type="translet">
            pointcut: {
                +: /ga-annotated-config/**/helloWorld@class:sample.SampleAction
            }
        </joinpoint>
        <advice bean="class:sample.SampleAdvice">
            <before>
                <action method="welcome"/>
            </before>
            <after>
                <action method="goodbye"/>
            </after>
        </advice>
    </aspect>

</aspectran>
